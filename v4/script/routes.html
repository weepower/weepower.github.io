<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Routes | Wee</title>
    <meta name="description" content="Blueprint for modern web development">
    
    
    <link rel="preload" href="/assets/css/0.styles.a0e9688a.css" as="style"><link rel="preload" href="/assets/js/app.47ec8783.js" as="script"><link rel="preload" href="/assets/js/51.40825d28.js" as="script"><link rel="prefetch" href="/assets/js/10.68538d1e.js"><link rel="prefetch" href="/assets/js/11.de97b93b.js"><link rel="prefetch" href="/assets/js/12.4ab09f98.js"><link rel="prefetch" href="/assets/js/13.d325b3df.js"><link rel="prefetch" href="/assets/js/14.0295d007.js"><link rel="prefetch" href="/assets/js/15.a87ff052.js"><link rel="prefetch" href="/assets/js/16.994a0851.js"><link rel="prefetch" href="/assets/js/17.7e86fbc6.js"><link rel="prefetch" href="/assets/js/18.72a5c445.js"><link rel="prefetch" href="/assets/js/19.20ae5ac9.js"><link rel="prefetch" href="/assets/js/20.dc34e009.js"><link rel="prefetch" href="/assets/js/21.bb8700ad.js"><link rel="prefetch" href="/assets/js/22.bb416506.js"><link rel="prefetch" href="/assets/js/23.2321e5b0.js"><link rel="prefetch" href="/assets/js/24.b6f0b51a.js"><link rel="prefetch" href="/assets/js/25.bfd278b9.js"><link rel="prefetch" href="/assets/js/26.99227192.js"><link rel="prefetch" href="/assets/js/27.c1d3ee44.js"><link rel="prefetch" href="/assets/js/28.732383d3.js"><link rel="prefetch" href="/assets/js/29.15c8abea.js"><link rel="prefetch" href="/assets/js/3.561367c0.js"><link rel="prefetch" href="/assets/js/30.577bbe6a.js"><link rel="prefetch" href="/assets/js/31.afe20104.js"><link rel="prefetch" href="/assets/js/32.06639946.js"><link rel="prefetch" href="/assets/js/33.f8f0c301.js"><link rel="prefetch" href="/assets/js/34.3dd5a283.js"><link rel="prefetch" href="/assets/js/35.fd73797e.js"><link rel="prefetch" href="/assets/js/36.c253724f.js"><link rel="prefetch" href="/assets/js/37.ccd77203.js"><link rel="prefetch" href="/assets/js/38.2d5e0a42.js"><link rel="prefetch" href="/assets/js/39.746b4fb3.js"><link rel="prefetch" href="/assets/js/4.00040a07.js"><link rel="prefetch" href="/assets/js/40.89036499.js"><link rel="prefetch" href="/assets/js/41.fa6d72fd.js"><link rel="prefetch" href="/assets/js/42.af0977da.js"><link rel="prefetch" href="/assets/js/43.cae8f002.js"><link rel="prefetch" href="/assets/js/44.c0f9b0c1.js"><link rel="prefetch" href="/assets/js/45.283456dd.js"><link rel="prefetch" href="/assets/js/46.be77c53a.js"><link rel="prefetch" href="/assets/js/47.60898e5d.js"><link rel="prefetch" href="/assets/js/48.18c1ab53.js"><link rel="prefetch" href="/assets/js/49.6921b3da.js"><link rel="prefetch" href="/assets/js/5.f66a3a50.js"><link rel="prefetch" href="/assets/js/50.f191ed64.js"><link rel="prefetch" href="/assets/js/52.ea5839b3.js"><link rel="prefetch" href="/assets/js/53.6a529757.js"><link rel="prefetch" href="/assets/js/54.49d4eea6.js"><link rel="prefetch" href="/assets/js/55.66648c00.js"><link rel="prefetch" href="/assets/js/56.6b09d08f.js"><link rel="prefetch" href="/assets/js/57.a5a062f0.js"><link rel="prefetch" href="/assets/js/58.36739884.js"><link rel="prefetch" href="/assets/js/59.ffaf1a40.js"><link rel="prefetch" href="/assets/js/6.78abfdf0.js"><link rel="prefetch" href="/assets/js/60.3f7577d3.js"><link rel="prefetch" href="/assets/js/61.54b42ef3.js"><link rel="prefetch" href="/assets/js/7.4505bfef.js"><link rel="prefetch" href="/assets/js/8.e3562a43.js"><link rel="prefetch" href="/assets/js/9.e1b8a979.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.6bab8de6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a0e9688a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Wee</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/v4/" class="nav-link router-link-active">v4</a></div><div class="nav-item"><a href="/v3/" class="nav-link">v3</a></div><div class="nav-item"><a href="https://github.com/weepower/wee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/weepower/wee/archive/master.zip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Download
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/v4/" class="nav-link router-link-active">v4</a></div><div class="nav-item"><a href="/v3/" class="nav-link">v3</a></div><div class="nav-item"><a href="https://github.com/weepower/wee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/weepower/wee/archive/master.zip" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Download
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/v4/" class="sidebar-link">Introduction</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Start</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>CLI</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Build</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Style</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Script</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/v4/script/core.html" class="sidebar-link">Core</a></li><li><a href="/v4/script/assets.html" class="sidebar-link">Assets</a></li><li><a href="/v4/script/fetch.html" class="sidebar-link">Fetch</a></li><li><a href="/v4/script/dom.html" class="sidebar-link">DOM</a></li><li><a href="/v4/script/events.html" class="sidebar-link">Events</a></li><li><a href="/v4/script/location.html" class="sidebar-link">Location</a></li><li><a href="/v4/script/mediator.html" class="sidebar-link">Mediator</a></li><li><a href="/v4/script/routes.html" class="active sidebar-link">Routes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v4/script/routes.html#lifecycle-methods" class="sidebar-link">Lifecycle Methods</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#matches" class="sidebar-link">Matches</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#records" class="sidebar-link">Records</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#route-handlers" class="sidebar-link">Route Handlers</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#router" class="sidebar-link">Router</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#router-onerror" class="sidebar-link">$router.onError</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#router-push" class="sidebar-link">$router.push</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#router-replace" class="sidebar-link">$router.replace</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#router-aftereach" class="sidebar-link">$router.afterEach</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#router-beforeeach" class="sidebar-link">$router.beforeEach</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#router-run" class="sidebar-link">$router.run</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#router-notfound" class="sidebar-link">$router.notFound</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#router-map" class="sidebar-link">$router.map</a></li><li class="sidebar-sub-header"><a href="/v4/script/routes.html#router-pjax" class="sidebar-link">$router.pjax</a></li></ul></li><li><a href="/v4/script/screen.html" class="sidebar-link">Screen</a></li><li><a href="/v4/script/store.html" class="sidebar-link">Store</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="routes"><a href="#routes" aria-hidden="true" class="header-anchor">#</a> Routes</h1> <hr> <p>Associate request endpoints to specified application logic</p> <p>Routes create independence between your markup and JavaScript.  It also allows us to easily integrate <a href="https://developer.mozilla.org/en-US/docs/Web/API/History" target="_blank" rel="noopener noreferrer">HTML5 History<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.  Wee routing serves as the blueprint for your project's JavaScript.</p> <h2 id="lifecycle-methods"><a href="#lifecycle-methods" aria-hidden="true" class="header-anchor">#</a> Lifecycle Methods</h2> <p>Lifecycle methods hook into the router and execute at key points in the route evaluation process.</p> <p>The following methods can be registered in a <a href="#route-handlers">route handler</a> and/or directly on <a href="#records">route records</a>. Lifecycle methods execute in the order that they are listed.</p> <h3 id="parameters"><a href="#parameters" aria-hidden="true" class="header-anchor">#</a> Parameters</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>to</td> <td>object</td> <td>-</td> <td>Current <a href="#matches">route match</a></td> <td>-</td></tr> <tr><td>from</td> <td>object</td> <td>-</td> <td>Previous <a href="#matches">route match</a></td> <td>-</td></tr> <tr><td>next</td> <td>function</td> <td>-</td> <td>Callback that continues route evaluation (before methods only)</td> <td>-</td></tr></tbody></table> <h3 id="before"><a href="#before" aria-hidden="true" class="header-anchor">#</a> Before</h3> <p>The before method is available only to <a href="#records">route records</a> and will execute after the route is matched and before any other registered methods are executed. This method receives a third parameter. This parameter is a function that must be executed before the other methods registered to the route will evaluate.</p> <p><strong>Fetching Data</strong></p> <p>Asynchronous actions can be taken from within <code>before</code>, preventing further evaluation of the matched route record until <code>next</code> is executed.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> admin <span class="token keyword">from</span> <span class="token string">'./admin'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> $fetch <span class="token keyword">from</span> <span class="token string">'wee-fetch'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span>
        handler<span class="token punctuation">:</span> admin<span class="token punctuation">,</span>
        <span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">'/data.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>Guards</strong></p> <p>Because the <code>next</code> function must be executed for evaluation of the route record to continue, before methods can act as a guard. You can halt evaluation of the route record by passing <code>false</code> to the <code>next</code> function.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> admin <span class="token keyword">from</span> <span class="token string">'./admin'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span>
        handler<span class="token punctuation">:</span> admin<span class="token punctuation">,</span>
        <span class="token function">before</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>notAuthorized<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token comment">// Stop evaluation and go no further</span>
              <span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token comment">// Continue</span>
              <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="before-init"><a href="#before-init" aria-hidden="true" class="header-anchor">#</a> Before Init</h3> <p>The beforeInit method is the same as the before method except that it is available only to <a href="#route-handlers">route handlers</a>. It will execute after the route is matched and before any other registered methods are executed except a before method registered on the matched <a href="#records">record</a>. This method fires only if the previously matched route record is different from the currently matched record.</p> <h3 id="before-update"><a href="#before-update" aria-hidden="true" class="header-anchor">#</a> Before Update</h3> <p>The beforeUpdate method is the same as the before method except that it is available only to <a href="#route-handlers">route handlers</a>. It will execute after the route is matched and before any other registered methods are executed except a before method registered on the matched <a href="#records">record</a>. This method fires if the user navigates to the same page as they were previously.</p> <h3 id="init"><a href="#init" aria-hidden="true" class="header-anchor">#</a> Init</h3> <p>The init method fires only if the previously matched route record is different from the currently matched record. In simpler terms, the init method fires the first time that the user visits a section of a website. This makes it easier to distinguish initialization of a page from logic that updates a page.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="update"><a href="#update" aria-hidden="true" class="header-anchor">#</a> Update</h3> <p>The update method fires if the user navigates to the same page as they were previously. A common example of this would be when a filter of some kind is updated by the user that changes the query string value of the URL. The same route record will match, however the page will need to be adjusted to match the constraints of the updated filter.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="unload"><a href="#unload" aria-hidden="true" class="header-anchor">#</a> Unload</h3> <p>The unload method evaluates when navigating away from a route. This is relevant when <a href="#pjax">PJAX</a> has been enabled and navigation on the site is using <a href="https://developer.mozilla.org/en-US/docs/Web/API/History" target="_blank" rel="noopener noreferrer">History<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. In this case, we may need to clean up after ourselves to prevent a memory leak. The unload method makes it easy to do this.</p> <p>This method takes either function or a namespace. If a namespace is provided, Wee will destroy anything generated or bound by <code>wee-events</code>, <code>wee-screen</code>, and <code>wee-store</code> registered with the same namespace.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> admin <span class="token keyword">from</span> <span class="token string">'./admin'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> home <span class="token keyword">from</span> <span class="token string">'./home'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> adminHandler<span class="token punctuation">,</span> <span class="token function">unload</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// Providing function</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> home<span class="token punctuation">,</span> unload<span class="token punctuation">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span> <span class="token comment">// Providing namespace</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="after"><a href="#after" aria-hidden="true" class="header-anchor">#</a> After</h3> <p>The after method will execute after all other methods have completed. Unlike the before method, this method is not passed a <code>next</code> function.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="matches"><a href="#matches" aria-hidden="true" class="header-anchor">#</a> Matches</h2> <p>A route match represents the state of the current active or previous route. This object is passed as the <code>to</code> and <code>from</code> parameters that are passed into <a href="#methods">lifecycle methods</a> as well as to other configuration methods such as <code>scrollBehavior</code> and <code>transition</code>.</p> <h3 id="properties"><a href="#properties" aria-hidden="true" class="header-anchor">#</a> Properties</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>name</td> <td>string</td> <td>-</td> <td>Name of route record</td> <td>-</td></tr> <tr><td>meta</td> <td>object</td> <td>{ }</td> <td>Meta data passed from route record</td> <td>-</td></tr> <tr><td>path</td> <td>string</td> <td>-</td> <td>URL path</td> <td>-</td></tr> <tr><td>hash</td> <td>string</td> <td>-</td> <td>URL hash</td> <td>-</td></tr> <tr><td>query</td> <td>object</td> <td>{ }</td> <td>Query string parsed from URL</td> <td>-</td></tr> <tr><td>search</td> <td>string</td> <td>-</td> <td>Raw URL query string</td> <td>-</td></tr> <tr><td>segments</td> <td>array</td> <td>[ ]</td> <td>URL path segments</td> <td>-</td></tr> <tr><td>params</td> <td>object</td> <td>{ }</td> <td>Parameters extracted from URL path based on route record path</td> <td>-</td></tr> <tr><td>fullPath</td> <td>string</td> <td>-</td> <td>URL path, query, and hash</td> <td>-</td></tr> <tr><td>matched</td> <td>object</td> <td>-</td> <td>All nested path segments of the current route record</td> <td>-</td></tr> <tr><td>transition</td> <td>object</td> <td>null</td> <td>Transition specified on route record</td> <td>-</td></tr></tbody></table> <h2 id="records"><a href="#records" aria-hidden="true" class="header-anchor">#</a> Records</h2> <p>Route records are objects that map a URL to parts of your application.</p> <p>When a route record is matched, the callbacks defined on that record are executed in a specific order. At a minimum, route records must consist of a <code>path</code> and either a <code>handler</code> or <code>init</code> property.</p> <h3 id="properties-2"><a href="#properties-2" aria-hidden="true" class="header-anchor">#</a> Properties</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>path</td> <td>string</td> <td>-</td> <td>The URL to be matched</td> <td>✔</td></tr> <tr><td>handler</td> <td>RouteHandler, array</td> <td>-</td> <td>Route handler(s) to be evaluated when route is matched</td> <td></td></tr> <tr><td>children</td> <td>array</td> <td>-</td> <td>Nested routes</td> <td></td></tr> <tr><td>name</td> <td>string</td> <td>-</td> <td>The name of the route object. Records can be referenced by name instead of path</td> <td></td></tr> <tr><td>meta</td> <td>object</td> <td>-</td> <td>Custom properties to be passed to matched route record functions</td> <td></td></tr> <tr><td>before</td> <td>function</td> <td>-</td> <td>Executes at the beginning of matched route evaluation and before any registered route handler <code>before</code> callbacks</td> <td></td></tr> <tr><td>init</td> <td>function</td> <td>-</td> <td>Evaluates the first time that the route is matched</td> <td></td></tr> <tr><td>update</td> <td>function</td> <td>-</td> <td>Evaluates in place of <code>init</code> when immediately preceding route match is same as current route match</td> <td></td></tr> <tr><td>after</td> <td>function</td> <td>-</td> <td>Executes at the end of matched route evaluation and after any registered route handler <code>after</code> callbacks</td> <td></td></tr> <tr><td>unload</td> <td>function</td> <td>-</td> <td>Evaluates when navigating away from current route record</td> <td></td></tr> <tr><td>transition</td> <td>object</td> <td>-</td> <td>Transition specific to route (overrides global transition)</td> <td></td></tr></tbody></table> <h3 id="path"><a href="#path" aria-hidden="true" class="header-anchor">#</a> Path</h3> <p>The path is the url that you wish to match. Paths can take an assortment of syntaxes. The full list of possible options are described in <a href="https://github.com/pillarjs/path-to-regexp" target="_blank" rel="noopener noreferrer">path-to-regexp<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, the package that Wee Routes uses for evaluating routes. Below is a description of some of these options.</p> <p><strong>Wildcards and Parameters</strong></p> <p>You may use <code>*</code> to indicate a wildcard segment.  If you wish to capture that segment and pass it to your function, you use parameters which are names preceded by a colon, i.e <code>:id</code>.  Route parameters will be accessible in the route object which is passed to the various callbacks registered on a matched route record.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> blog <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./blog'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/blog/:id'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> blog <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// and in `./scripts/blog`exportfunctionblog(route) {</span>
<span class="token comment">// route.params.id will now be the matched segment.</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Optional Parameters</strong></p> <p>You can make parameters in a path optional by adding a <code>?</code> to the end of the parameter. For example we could change the path example above:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/blog/:id?'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> blog <span class="token punctuation">}</span>
</code></pre></div><p>This route record would now match for either <code>/blog</code> or <code>/blog/1</code>.</p> <h3 id="name"><a href="#name" aria-hidden="true" class="header-anchor">#</a> Name</h3> <p>The routes name allows you to reference the route by name, regardless of any changes to the path.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> adminHandler <span class="token keyword">from</span> <span class="token string">'./admin'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'admin'</span><span class="token punctuation">,</span> path<span class="token punctuation">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> adminHandler <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="meta"><a href="#meta" aria-hidden="true" class="header-anchor">#</a> Meta</h3> <p>Sometimes you may want to pass specific properties into the registered functions for a route record. This can be accomplished through the meta property.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> adminHandler <span class="token keyword">from</span> <span class="token string">'./admin'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> adminHandler<span class="token punctuation">,</span> meta<span class="token punctuation">:</span> <span class="token punctuation">{</span> isAdmin<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// and in './scripts/admin'exportdefault</span>

<span class="token keyword">new</span> <span class="token class-name">RouteHandler</span> <span class="token punctuation">{</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>isAdmin<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="handler"><a href="#handler" aria-hidden="true" class="header-anchor">#</a> Handler</h3> <p>The handler property can take a <a href="#route-handlers">Route Handler</a> or an array of Route Handlers.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'core/router'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> blogHandler <span class="token keyword">from</span> <span class="token string">'./blog'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> commonHandler <span class="token keyword">from</span> <span class="token string">'./common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> socialHandler <span class="token keyword">from</span> <span class="token string">'../components/social'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> commentsHandler <span class="token keyword">from</span> <span class="token string">'../components/comments'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> common <span class="token operator">=</span> <span class="token punctuation">[</span>commonHandler<span class="token punctuation">]</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> common <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token string">'/blog/:id'</span><span class="token punctuation">,</span>
        handler<span class="token punctuation">:</span> <span class="token punctuation">[</span>blogHandler<span class="token punctuation">,</span> socialHandler<span class="token punctuation">,</span> commentsHandler<span class="token punctuation">,</span> <span class="token operator">...</span>common<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="children"><a href="#children" aria-hidden="true" class="header-anchor">#</a> Children</h3> <p>You may nest routes under the <code>children</code> key.  It will accept an array of routes, structured exactly as the original route record is structured and supports all of the same options.</p> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>You must omit the parent segment from the child paths</p></div> <p>When a child route is matched, this causes both the child route and it's parent route to be evaluated (parent -&gt; children).</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> adminHandler <span class="token keyword">from</span> <span class="token string">'./admin'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> postHandler <span class="token keyword">from</span> <span class="token string">'./post'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token string">'/admin'</span><span class="token punctuation">,</span>
        handler<span class="token punctuation">:</span> adminHandler<span class="token punctuation">,</span>
        children<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> postHandler <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="route-handlers"><a href="#route-handlers" aria-hidden="true" class="header-anchor">#</a> Route Handlers</h2> <p>Route Handlers are special objects that are used throughout an application to define router functionality. They can greatly clean up your route mapping by housing the various functions in their own file/module.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> about <span class="token keyword">from</span> <span class="token string">'./about'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span>
        <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// becomes</span>
$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> about <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>In the <code>about</code> module, you would export a <code>RouteHandler</code> instance with some or all of the following methods:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> RouteHandler <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">RouteHandler</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">beforeInit</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    unload<span class="token punctuation">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span>
    <span class="token function">after</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>There are other, larger benefits to using Route Handlers besides cleaning up your main route file. Since Route Handlers will live inside page-specific modules, your Route Handler functions will have access to all page-specific variables and data. This works the other direction as well. If you need to dynamically retrieve any data with an AJAX request in a <code>beforeInit</code> hook for a particular page, for example, you can easily pass that data to your page-specific code.</p> <p>Lastly, Route Handlers can be shared between multiple route records. This can be advantageous because you may, for example, have a common set of logic that you want triggered on every page. However, you may need that common module updated independently, rather than initialized, when the route record is being processed for the first time because the route handler was already initialized on a different route. This is easily achievable with Route Handlers.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> common <span class="token keyword">from</span> <span class="token string">'./common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> home <span class="token keyword">from</span> <span class="token string">'./home'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> about <span class="token keyword">from</span> <span class="token string">'./about'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> <span class="token punctuation">[</span>common<span class="token punctuation">,</span> home<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> <span class="token punctuation">[</span>common<span class="token punctuation">,</span> about<span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// home.init and common.init will fire</span>
$router<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// about.init and common.update will fire</span>
</code></pre></div><h3 id="handler-methods"><a href="#handler-methods" aria-hidden="true" class="header-anchor">#</a> Handler Methods</h3> <p>Route Handlers have a specific set of possible methods/properties. Many of these are the same as route records, however there are some important additions. <code>beforeUpdate</code> and <code>beforeInit</code> are added to give more control over possible data fetching or module bootstrapping.</p> <table><thead><tr><th>Option</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>beforeInit</td> <td>Executes before <code>init</code></td> <td>-</td></tr> <tr><td>beforeUpdate</td> <td>Executes before <code>update</code></td> <td>-</td></tr> <tr><td>init</td> <td>Executes on first evaluation of handler</td> <td>-</td></tr> <tr><td>update</td> <td>Executes after first evaluation of handler</td> <td>-</td></tr> <tr><td>unload</td> <td>Executes when leaving route record</td> <td>-</td></tr> <tr><td>after</td> <td>Executes after all other methods</td> <td>-</td></tr></tbody></table> <h2 id="router"><a href="#router" aria-hidden="true" class="header-anchor">#</a> Router</h2> <p>The router is a method that can take an options object. This configuration object will affect how routing behaves.It also has all of the route API methods chained to it. This allows us to initialize routes in one of two ways:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>

<span class="token comment">// With custom configuration</span>
<span class="token function">$router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">scrollBehavior</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    transition<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Using router defaults</span>
$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="options"><a href="#options" aria-hidden="true" class="header-anchor">#</a> Options</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>scrollBehavior</td> <td>function</td> <td>-</td> <td>Defines scroll position of new page after navigation</td> <td>-</td></tr> <tr><td>transition</td> <td>object</td> <td>-</td> <td>Transition during navigation</td> <td>-</td></tr></tbody></table> <h3 id="scroll-behavior"><a href="#scroll-behavior" aria-hidden="true" class="header-anchor">#</a> Scroll Behavior</h3> <p>When navigating a user with <a href="https://developer.mozilla.org/en-US/docs/Web/API/History" target="_blank" rel="noopener noreferrer">History<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, we may want to scroll to the top of the page, or preserve the scrolling position of history entries just like the browser does during a full page reload (or some other custom behavior). This is controlled with the <code>scrollBehavior</code> function. The default scroll functionality would look like this if passed in manually to the router:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>

<span class="token function">$router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">scrollBehavior</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>savedPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> savedPosition<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="parameters-2"><a href="#parameters-2" aria-hidden="true" class="header-anchor">#</a> Parameters</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>to</td> <td>object</td> <td>-</td> <td>Current <a href="#matches">route match</a></td> <td>-</td></tr> <tr><td>from</td> <td>object</td> <td>-</td> <td>Previous <a href="#matches">route match</a></td> <td>-</td></tr> <tr><td>savedPosition</td> <td>object</td> <td>-</td> <td>Saved x and y values</td> <td>-</td></tr></tbody></table> <p>The savedPosition parameter exists if the navigation was triggered with the <a href="https://developer.mozilla.org/en-US/docs/Web/Events/popstate" target="_blank" rel="noopener noreferrer">popstate event<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and therefore has the saved scroll state from when the page was previously visited.</p> <h3 id="transitions"><a href="#transitions" aria-hidden="true" class="header-anchor">#</a> Transitions</h3> <p>Transitions allow for a smooth experience when navigating with the router. The most basic implementation looks something like the following:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>

<span class="token function">$router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    transition<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'body'</span><span class="token punctuation">,</span>
        <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">'-is-loading'</span><span class="token punctuation">,</span>
        timeout<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Here we are telling the router to apply a given modifier class to a single container element on the page that we want to transition out and back in again.</p> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>Make sure transition class target is is not being replaced by <code>PJAX</code>, or the transition will fail.</p></div> <p>The expectation with this implementation is that the designated class is applying a CSS transition which means that the target element must stay on the DOM throughout the navigation process. The timeout property is recommended to ensure that transitions work consistently. The value of the timeout property would typically be the same length of time as the transition applied on the target or longer.</p> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>The need for a timeout will be corrected in a future version of Wee.</p></div> <p>The other implementation uses custom callbacks and looks like the following:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>

<span class="token function">$router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    transition<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token function">leave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Custom logic for exiting previous pageif (! transitionSuccessful) {</span>
              <span class="token function">next</span><span class="token punctuation">(</span><span class="token function">newError</span><span class="token punctuation">(</span><span class="token string">'something went wrong'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">enter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Custom logic for entering newly navigated page</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="parameters-3"><a href="#parameters-3" aria-hidden="true" class="header-anchor">#</a> Parameters</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>to</td> <td>object</td> <td>-</td> <td>Current <a href="#matches">route match</a></td> <td>-</td></tr> <tr><td>from</td> <td>object</td> <td>-</td> <td>Previous <a href="#matches">route match</a></td> <td>-</td></tr> <tr><td>next</td> <td>function</td> <td>-</td> <td>Callback that continues transition evaluation (leave only)</td> <td>-</td></tr></tbody></table> <p>This implemenation allows you to do anything you can dream up. Passing an error instance will cause the navigation to stop processing and return to the previous page, again same as a <code>before</code> hook.</p> <p>Transitions can be configured globally or per route. Transitions on a route record will take precedence:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>

<span class="token function">$router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    transition<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'body'</span><span class="token punctuation">,</span>
        <span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">'-is-loading'</span><span class="token punctuation">,</span>
        timeout<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        transition<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token function">leave</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="router-onerror"><a href="#router-onerror" aria-hidden="true" class="header-anchor">#</a> $router.onError</h2> <p>Register global error handler</p> <p>This method registers global router error handlers. These handlers will be executed if anything goes wrong with navigation and/or route processing (including PJAX navigations). An error that is thrown within the router will differ in the properties they contain. However, these are the properties you can count on to determine the action you should take in your error callback:</p> <h3 id="error-properties"><a href="#error-properties" aria-hidden="true" class="header-anchor">#</a> Error Properties</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>errorType</td> <td>string</td> <td>-</td> <td>Name of error constructor</td> <td>-</td></tr> <tr><td>message</td> <td>string</td> <td>-</td> <td>Description of what went wrong</td> <td>-</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Handle error</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>All custom errors in Wee extend <code>Error</code>. Babel cannot currently extend built-in types so we cannot use <code>instanceof</code> inspections of our custom errors to determine the type, hence <code>errorType</code> is added to all custom errors in Wee to fill this need.</p> <h2 id="router-push"><a href="#router-push" aria-hidden="true" class="header-anchor">#</a> $router.push</h2> <p>Navigate with History API</p> <p>This method allows you to navigate to a url and add the navigation to the browser's history. It also hooks into <a href="#pjax">PJAX</a> if enabled on router, allowing you to override partial targets or pause partial replacement during the request. This method returns a promise.</p> <h3 id="parameters-4"><a href="#parameters-4" aria-hidden="true" class="header-anchor">#</a> Parameters</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>path</td> <td>string</td> <td>-</td> <td>Destination URL</td> <td>✔</td></tr> <tr><td>modifyPjax</td> <td>boolean, object</td> <td>false</td> <td>Modify/pause PJAX during request. Passing <code>true</code> will pause PJAX altogether for request.</td> <td>-</td></tr></tbody></table> <h3 id="modify-pjax"><a href="#modify-pjax" aria-hidden="true" class="header-anchor">#</a> Modify PJAX</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>partials</td> <td>array</td> <td>-</td> <td>Targets used for partial replacement</td> <td>-</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> partials<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.some-other-target'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="router-replace"><a href="#router-replace" aria-hidden="true" class="header-anchor">#</a> $router.replace</h2> <p>Navigate with History API, replacing browser history entry</p> <p>This method allows you to navigate to a url and replace the most recent browser history entry. It also hooks into <a href="#pjax">PJAX</a> if enabled on router, allowing you to override partial targets or pause partial replacement during the request. This method returns a promise.</p> <h3 id="parameters-5"><a href="#parameters-5" aria-hidden="true" class="header-anchor">#</a> Parameters</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>path</td> <td>string</td> <td>-</td> <td>Destination URL</td> <td>✔</td></tr> <tr><td>modifyPjax</td> <td>boolean, object</td> <td>false</td> <td>Modify/pause PJAX during request. Passing <code>true</code> will pause PJAX altogether for request.</td> <td>-</td></tr></tbody></table> <h3 id="modify-pjax-2"><a href="#modify-pjax-2" aria-hidden="true" class="header-anchor">#</a> Modify PJAX</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>partials</td> <td>array</td> <td>-</td> <td>Targets used for partial replacement</td> <td>-</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> partials<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.some-other-target'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="router-aftereach"><a href="#router-aftereach" aria-hidden="true" class="header-anchor">#</a> $router.afterEach</h2> <p>Register global after method</p> <p>The function passed to <code>afterEach</code> will be executed at the very end of the matched route record's evaluation. Like <code>beforeEach</code>, you can register as many as you like, and they will execute in the order they were registered.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> common <span class="token keyword">from</span> <span class="token string">'./common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> about <span class="token keyword">from</span> <span class="token string">'./about'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> common <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> about <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="router-beforeeach"><a href="#router-beforeeach" aria-hidden="true" class="header-anchor">#</a> $router.beforeEach</h2> <p>Register global before method</p> <p>The function passed to <code>beforeEach</code> will be executed before any route record specific before methods and can act as a guard in the same way that <a href="#methods">before</a> does for an individual route record. This function is passed the same parameters as all other before methods. You can register as many <code>beforeEach</code> methods as you like, and they will execute in the order they are registered.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> common <span class="token keyword">from</span> <span class="token string">'./common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> about <span class="token keyword">from</span> <span class="token string">'./about'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> common <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> about <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="router-run"><a href="#router-run" aria-hidden="true" class="header-anchor">#</a> $router.run</h2> <p>Evaluate routes against current URL</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> common <span class="token keyword">from</span> <span class="token string">'./common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> about <span class="token keyword">from</span> <span class="token string">'./about'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> common <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'about'</span><span class="token punctuation">,</span> path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> about <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Run returns a promise// Do something with error</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="router-notfound"><a href="#router-notfound" aria-hidden="true" class="header-anchor">#</a> $router.notFound</h2> <p>Add 404 style wildcard route</p> <p>This method takes a route record object, excluding the <code>path</code> or <code>name</code> properties of a normal route record.  This route record will be evaluated if no other routes match. <code>notFound</code> is simply a convenience method. You can achieve the same functionality by registering a wildcard route record at the end of your map array with <code>path: '*'</code> and <code>name: 'notFound'</code>. This method, however, is  a little more expressive.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> common <span class="token keyword">from</span> <span class="token string">'./common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> about <span class="token keyword">from</span> <span class="token string">'./about'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> unknown <span class="token keyword">from</span> <span class="token string">'./404'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> common <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> about <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">notFound</span><span class="token punctuation">(</span><span class="token punctuation">{</span> handler<span class="token punctuation">:</span> unknown <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="router-map"><a href="#router-map" aria-hidden="true" class="header-anchor">#</a> $router.map</h2> <p>Define routes for application</p> <h3 id="parameters-6"><a href="#parameters-6" aria-hidden="true" class="header-anchor">#</a> Parameters</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>routes</td> <td>array</td> <td>-</td> <td>Array of <a href="#records">route records</a></td> <td>✔</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> common <span class="token keyword">from</span> <span class="token string">'./common'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> about <span class="token keyword">from</span> <span class="token string">'./about'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> common <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> about <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="router-pjax"><a href="#router-pjax" aria-hidden="true" class="header-anchor">#</a> $router.pjax</h2> <p>Enable and configure global PJAX behavior</p> <p>This function enables a specific implementation of history navigation in which html partials are returned and replaced on the DOM rather than a full page load. This works very well to make websites that use static templates feel more like a single page application.</p> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>options</td> <td>object</td> <td>-</td> <td>Configuration options</td> <td>-</td></tr></tbody></table> <h3 id="options-object"><a href="#options-object" aria-hidden="true" class="header-anchor">#</a> Options Object</h3> <table><thead><tr><th>Variable</th> <th>Type</th> <th>Default</th> <th>Description</th> <th>Required</th></tr></thead> <tbody><tr><td>bind</td> <td>object, array</td> <td>{ click: 'a' }</td> <td>Target for binding events that will trigger navigation</td> <td>-</td></tr> <tr><td>partials</td> <td>array</td> <td>['title', 'main']</td> <td>DOM targets to be replaced</td> <td>-</td></tr> <tr><td>replace</td> <td>function</td> <td>-</td> <td>Hook for manipulating returned HTML</td> <td>-</td></tr> <tr><td>request</td> <td><a href="/scripts/fetch">$fetch</a></td> <td>-</td> <td>Custom fetch instance if request configuration is required</td> <td>-</td></tr> <tr><td>context</td> <td>string, HTMLElement</td> <td>document</td> <td>Context for elements defined in <code>bind</code> option</td> <td>-</td></tr> <tr><td>onError</td> <td>function</td> <td>-</td> <td>Execute callback if pjax triggered navigation fails</td> <td>-</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> $router <span class="token keyword">from</span> <span class="token string">'wee-routes'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> about <span class="token keyword">from</span> <span class="token string">'./about'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> common <span class="token keyword">from</span> <span class="token string">'./common'</span><span class="token punctuation">;</span>

$router<span class="token punctuation">.</span><span class="token function">pjax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    bind<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        click<span class="token punctuation">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    partials<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> common <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> handler<span class="token punctuation">:</span> about <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>URL Validity</strong></p> <p>When <code>pjax</code> is executed, it binds events to designated targets on the DOM that will trigger an AJAX request for the destination page's HTML and then navigate to the destination URL. During this binding phase, the URL of each DOM target will be evaluated to ensure the URL is valid. The following criteria determine a valid URL.</p> <ul><li>URL exists (either <code>href</code> if DOM target is <code>&lt;a&gt;</code> or <code>data-url</code> if another DOM element)</li> <li>URL does not open new window (checks for <code>_blank</code> attribute)</li> <li>URL is absolute URL, not relative (<code>https://something.com/about</code> vs <code>/about</code>)</li> <li>Target is not a download link</li> <li>Target does not have <code>data-static</code> attribute</li> <li>URL is not external link</li> <li>URL is current page, only with hash added</li></ul></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/v4/script/mediator.html" class="prev">
          Mediator
        </a></span> <span class="next"><a href="/v4/script/screen.html">
          Screen
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.47ec8783.js" defer></script><script src="/assets/js/51.40825d28.js" defer></script>
  </body>
</html>
